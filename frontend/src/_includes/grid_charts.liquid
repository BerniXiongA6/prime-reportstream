
<script src="js/cards.js"></script>

<section class="grid-container margin-top-0">
  <div id="cards" class="grid-row grid-gap margin-top-0">
  </div>
</section>


<script defer>
  (async () => {
    const cards = await fetchCards();
      cards.forEach( card => {
        document.getElementById( "cards").innerHTML +=
          `<div class="tablet:grid-col-6">
            <div class="usa-card__container">
              <div class="usa-card__body">
                <h4 class="text-gray-30 margin-bottom-0">${card.title}</h4>
                <p class="text-bold margin-top-0">${card.subtitle}</p>
                <h4 class="text-gray-30 margin-bottom-0">Current</h4>
                <p class="text-bold margin-top-0">${card.daily}</p>
                <h4 class="text-gray-30 margin-bottom-0">Last</h4>
                <p class="text-bold margin-top-0">
                  ${card.last}
                  <span class="float-right ${card.positive? "text-green" : "text-red"}">
                    ${card.positive? "&#8593;" : "&#8595;"} ${card.change} (${card.pct_change}%)
                  </span>
                </p>
                <canvas id="${card.id}" width="200" height="40"></canvas>
              </div>  
            </div>
          </div>`
     } );
var ctx = 'summary-tests';

var options = {
      legend: {
          display: false,
      },
      scales: {
          yAxes: [{
              ticks: { beginAtZero: false },
              display: false
          }],
          xAxes: [{
              display: false
          }]
      }
  }

var labels = ["2021-03-09", "2021-03-10","2021-03-11","2021-03-12","2021-03-13","2021-03-14","2021-03-15", "2021-03-16" ]

var myLineChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: labels,
    datasets: [{ 
        data: cards[0].data,
        borderColor: "#4682B4",
        backgroundColor: "#B0C4DE",
        fill: 'origin',
        borderJoinStyle: "round"
      }
    ]
  },
  options: options
});

  })();
</script>
