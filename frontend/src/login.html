---
layout: protected.liquid
title: Sign-in
permalink: "{{ title | slug }}/"
show_navbar: true
protected: false
hide_signin: true
---

<body>
    <div id="okta-login-container"></div>

<script type="text/javascript" th:inline="javascript">

    let OKTA_clientId = '0oa6fm8j4G1xfrthd4h6';

    console.log( `redirectUri = ${window.location.origin}` );

    const redirectUri = window.location.origin;

    var config = {
        logo: '//logo.clearbit.com/cdc.gov',
        language: 'en',
        features: {
            registration: false, // Enable self-service registration flow
            rememberMe: false, // Setting to false will remove the checkbox to save username
            router: true, // Leave this set to true for the API demo
        },
        el: "#okta-login-container",
        baseUrl: `https://hhs-prime.okta.com`,
        clientId: `${OKTA_clientId}`,
        redirectUri: redirectUri,
        authParams: {
          issuer: `https://hhs-prime.okta.com/oauth2/default`
        }
    };

    var signInWidget= new OktaSignIn(config);
    signInWidget.showSignInToGetTokens( { scopes: ['openid', 'email', 'profile'] } )
        .then( function( tokens ){
            var jwt = tokens.accessToken.value;
            window.sessionStorage.setItem('jwt', jwt) ;
<<<<<<< HEAD
            
            let running = window.sessionStorage.getItem("idle-timer");

            if( !running ){    
                console.log( `setting timer` );
                window.sessionStorage.setItem("idle-timer","true");
                const instance = idleTimeout( () => {
                    console.log( `timer expired` )
                    window.sessionStorage.clear()
                    window.location.replace(`login.html`);
                },
                {
                    element: document,
                    timeout: 1000 * 60 * 1,
                    loop: false
                });
            }

            //window.location.replace(`${window.location.origin}/data-index.html`);

=======
            window.location.replace(`${window.location.origin}/daily-data/`);
>>>>>>> origin/master
        });
</script>
</body>
